# 第十三章 关于数据的持久化

### 关于持久化数据的方法

#### 保存文本

#### 变换成文本的 Marshal

UNINX 系列操作系统中,文件可以看做是文本数据的容器.

将对象按一定的方式变换为文本,就可以保存到文件中去.这样的对象文本化,就称为:

* serialize(序列化)
* marshal(封送处理)

#### 复制有两种方法

**浅复制**

`shallow cop`,只复制直接对象,引用的对象不复制.

`deep copy`深复制. 联通引用对象一起进行==递归复制==.

#### 变换为文本的 YAML

YAML 是 YAML Ain't Markup Language (YAML 不是标记语言) 的缩略语.

### 对象的保存

#### 高速的 Object Prevalence

**日志记录**

文杰写入外部的存储器时,在记录实际数据之前,先写入管理信息(元数据),以及元数据的变更记录.

#### Object Prevalence的问题点

Object Prevalence 通过使用日志记录和快照实现了对象的持久化和进程共享.

**缺点**

将所有的数据都保存到内存中,随着数据量的增大,内存的消耗也在增大.

关系数据库中,不应用的数据放在文件中,必要的内存量就不用那么多了.