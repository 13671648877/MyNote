# 第十七章 味道与启发

---

### 注释

* 版本控制相关的信息不应该放在注释当中(最后修改时间,修改历史..),注释只应该描述有关代码和设计的技术性信息.
* 废弃的注释,最好尽快更新或删除掉
* 不要冗余注释,注释应该谈及代码自身没提到的东西
* 注释不要说废话
* 不要注释掉无用的代码,删除它

### 环境

* 单个命令签出系统
* 单个指令构建它
* 单个指令就可以运行全部单元测试

### 函数

* 不要过多的参数,最好没有参数
* 输出参数理解成本高(参数以地址引用格式传递)
* `bool`值得参数违背了单一职责,该函数必定会干两件事
* 不要注释掉无用的参数,而是直接删除它

### 一般性问题

* 尽力减少源文件中额外语言的数量和范围.
* 如果函数或类内明显的行为未被实现,读者和用户就不能再==依靠他们对函数名称的直觉==.
* 追索每种边界条件,并编写测试.
* 处理`warning`级别的报错提示,不要忽视它.
* ==重复的代码== = 遗漏了抽象.
* 完整的分离不同层次的概念,低层次的概念与高层次的概念不应该混在一起.
	* 抽象类容纳较高层次的概念.
	* 派生类容纳较低层次的概念.
* 基类应该对派生类一无所知.
* 设计良好的模块有着非常小的接口,`ISP`接口分离原则.
	* 类中的方法越少越好.
	* 函数知道的变量越少越好.
	* 类拥有的实体变量越少越好.
* 找到==没有被执行过的代码==,删除它.
* 垂直分隔
	* 变量就近声明.
	* 私有函数应该行号在其首次被使用的位置下面定义.
* 规范需要前后一致.
* 没有用到的变量, 从不调用的函数, 没有信息的注释都会混淆视听.
* 不互相依赖的东西不该耦合.
* 类的方法只应对其所属类中的变量和函数感兴趣,不该垂青其他类中的变量和函数.当方法通过某个其他对象的访问器和修改器来操作对象内部的数据,则它就==依恋于==该对象所属类的范围.
* 使用多个表述清晰的函数,比用一个函数加上某个用于表述选择的参数更合适.(其实还是表述的是函数==单一职责==)
* 代码的表述应该尽可能具有表达力,不要模棱两可.
* 代码应该放在读者自然而然期待它所在的地方.
* 如果需要用到静态函数,确保没机会打算让它有多态行为.
* 用==解释型变量==解释一段中间代码的意图.
* 函数名称应该表达其行为.
* 函数内部的实现应该
	* 整洁
	* 足具表达力
	* 清楚呈现如何工作 
* 用多态替代`if/else 或 switch/case`
* 使用样例代码来代替文档描述这些规范
* 用命名常量替代魔术数
* 代码的表述:
	* 清晰
	* 准确
* 用结构来约束强制性约定(比如,继承抽象方法的强制性约束比用命名来约定要好).
* 用小的函数名称来解释意图.
* 避免否定性的条件==??卫式编程==。
* 一个函数只做一件事,单一职责。
* 通过添加函数的参数调用(下一个函数的参数依赖上一个函数返回的结果)来呈现函数的时序.
* 封装边界条件(`nextLevel = level+1` 使用 `nextLevel` 要优于调用 `level+1`).
* 函数应该只在一个抽象层级上,函数中的语句应该在同一抽象层级上.
* 在较高层级放置可配置数据,常量定义放在文件顶部.
* 避免传递浏览(迪米特法则,不要和陌生人说话).

### Java

* 不要继承常量

### 名称

* 采用描述性名称,确认名称具有描述性.
* 名称应于抽象层级相符.
* 为较大的作用范围选用较长名称.
* 名称应该说明副作用.

### 测试

### 小结

### 文献