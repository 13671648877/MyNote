# 第六章 对象和数据结构

---

### 数据抽象

**私有变量的取值器,赋值器**

即便变量都是私有, 而且我们也通过变量取值器和赋值器使用变量, 其实现仍然暴露了.

**隐藏关乎抽象**

类并不简单地用去之气和赋值器就将其变量推向外间,而是==暴露抽象接口==, 以便用户==无需了解数据的实现就能操作数据本体==.

**不要盲目的添加取值器和赋值器**

不应该暴露数据细节, 要以抽象形态表述数据.

### 数据,对象的反对称性

* 对象: 把数据隐藏于抽象之后, 暴露其操作数据的函数.
* 数据结构: 暴露其数据, 没有提供有意思的函数.(值对象)

**对象与数据结构之间的二分原理**

* 过程式代码(使用数据结构的代码)便于在==不改动给予数据结构的前提下添加新函数==.
* 面向对象代码便于在==不改动既有函数的前提下添加新类==
* 过程式代码难以添加新数据结构, 因为必须修改所有函数.
* 面向对象代码难以添加新函数, 因为必须修改所有类.

### 得墨忒耳律

一个软件实体应当尽可能少地与其他实体发生相互作用.

**不要和"陌生人"说话,只与你的直接朋友通信**

`朋友`:

1. 当前对象本身(this).
2. 以参数形式传入到当前对象方法中的对象.
3. 当前对象的成员对象.
4. 如果当前对象的成员对象是一个集合,那么集合中的元素也都是朋友.
5. 当前对象所创建的对象.

#### 火车失事

连串调用通常被认为是肮脏的风格.

```php
ctxt.getOptions().getScratichDir().getAbsolutePath().
```

#### 混杂

#### 隐藏结构

对于`对象`, 我们应该要求它==做点什么==, 不该要求它给出==内部情形==.

作者举例:

上面 火车失事 例子中的代码其实目的就是获取路路径后创建临时文件, 为什么不把 创建临时文件 这个方法放到 `ctxt` 对象内呢.

### 数据传送对象

**DTO**

`D`ata `T`ransfer `O`bject

最为精炼的数据结构, 是一个只有公共变量,没有函数的类. 这种数据结构有时被称为数据传送对象.

### 小结

对象暴露行为, 隐藏数据. 便于添加新对象类型而无需修改既有行为, 同时也难以在既有对象中添加新行为. 

数据结构暴露数据, 没有明显的行为. 便于像既有数据结构添加新行为, 同时也难以向既有函数添加新数据结构.