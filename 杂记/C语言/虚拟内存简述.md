#虚拟内存简述

---

**什么是虚拟内存**

虚拟内存是一个4G(32位系统)的地址空间,是一个空间,有部分对应实在的代码和数据,还有很多是空的地址,不对应实际的代码和数据.

**MMU**

MMU管理的确实是虚拟内存,它是CPU的一个物理部件.

**页交换文件属于虚拟内存,虚拟内存不是页交换文件**

虚拟内存对应实在的代码和数据存在两个地方,一个是按页存入物理内存,另一个是按页存入硬盘.

在硬盘上的部分是以文件形式存在,目的是为了换入换出内存,所以叫页交换文件.

`页交换文件不是虚拟内存,是其中的一种存在形式,另一种形式是内存.`

**示例**

可执行文件运行时要先装载,但并没有把所有代码和数据从硬盘复制到内存(内存和硬盘中各有部分,并且以页形式存在,一般页有4KB大小),当程序执行到某个代码或数据时,如果内存中没有,那么CPU就产生一个异常(因为CPU只能直接存取在内存中的代码和数据,不能直接访问硬盘中的),然后通过MMU控制把对应的代码或数据的页从硬盘调入内存,再回到产生异常的指令,重新执行(当然代码或数据已经在内存,这次不产生异常了)
