# nginx 恶意指向

---

今天整理服务器, 发现有一个别人的域名恶意指向到自己的服务器. 这台服务器因为使用了容器, 前端假设了一个`nginx`专门用于反向代理. 有三个域名指向. 每个配置文件都设置了`server_name`. 发现用`ip`可以直接访问到第一个配置文件的网站. 且配置文件是按照字母顺序加载的, 第一个配置文件刚好是`c`开头的, 所以排第一. 别人域名指向我的ip 80端口就会指到这个网站上.

```shell
[chloroplast@idc nginx-reverse]$ cat a.first.conf
server {
    listen 80 default;
    return 400;
}
```

命名为`a.first.conf`是一个取巧的方法, 因为容器的配置文件我没有挂载`nginx.conf`到本地, 就命名了一个`a`开头的文件(排序在第一个)，这样默认指向都会返回`400`错误. 恶意指向的域名也会直接返回`400`.