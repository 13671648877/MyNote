#07_01 vim编辑器详解

###笔记

---

**文本编辑器,文字处理器**

`vi`: Visual Interface  
`vim`: VI iMproved  

全屏编辑器,模式化编辑器

**vim /path/to/somefile**

`vim 模式`:

* 编辑模式(命令模式): 所有`机械命令`会被理解为`编辑整个文档`.
* 输入模式 : 所有`机键命令`会被当做`输入到文件的内容`,保存到文档当中
* 末行模式 : 提供除了编辑模式额外的管理命令

`模式转换`:
	
* `编辑` -> `输入`:
	* `i`: 在当前光标所在字符的`前`面,转为输入模式.
	* `a`: 在当前光标所在字符的`后`面,转为输入模式.
	* `o`: 在当前光标所在行的`下方`,`新建一行`,并转为输入模式.
	* `I`: 在当前光标所在行的`行首`,转为输入模式.
	* `A`: 在当前光标所在行的`行尾`,转为输入模式.
	* `O`: 在当前光标所在行的`上方`,转为输入模式.
* `输入` -> `编辑`:
	* `ESC`
* `编辑` -> `末行`(只能从编辑模式进入)
	* `:`(输入冒号)
* `末行` -> `编辑`
	* `ESC`,`ESC` 

**打开文件**

* `vim +#`: 打开文件,并且定位到`#`行.  
* `vim + 空格 文件名`: 打开文件,并且定位文件`尾部`.
* `vim+ /PATTERN`: 打开文件,定位至`第一次`被PATTERN匹配到的行的行首

`默认处于编辑模式`

**关闭文件**

* 末行模式关闭文件
	* `:w`: 保存 
	* `:q`: 退出
	* `:wq`: 保存并退出
	* `:q!`: 不保存并退出
	* `:w!`: 管理员强行保存
	* `:wq`: `:x` 命令相等
	
* 编辑模式下退出
	* `ZZ`: 保存退出
	
**移动光标(编辑模式)**

* 逐字符移动:
	* `h`: 左
	* `l`: 右
	* `j`: 下
	* `k`: 上
	* `#(h,l,j,k)`: 移动`#`个字符
* 以单词为单位移动:
	* `w`:移至`下一个`单词的`词首`
	* `e`:跳至当前或`下一个`单词的`词尾`
	* `b`:跳至当前或前一个单词的`词首`
	* `#(w,e,b)`: 跳至`#`个单词
* 行内跳转:
	* `0`:跳至行首(绝对行首)
	* `^`:跳至行首`第一个非空白`字符
	* `$`:绝对行尾 
* 行间跳转:
	* `#G`: 直接跳转至第`#`行	* `G`:	最后一行	* 末行模式下,直接给出行号即可
	**翻屏**

* `Ctrl+f`: 向`下`翻一屏
* `Ctrl+b`: 向`上`翻一屏* `Ctrl+d`: 向`下`翻半屏* `Ctrl+u`: 向`上`翻半屏
**删除单个字符**

* `x`: 删除光标所在处的单个字符
* `#x`: 删除光标所在处及向后的共#个字符
 **删除命令**

* `d`: 命令跟跳转命令组合使用* `#d`: 跳转符: 删除跳转符范围的#个
		#dw,#de,#db* `dd`:删除当前光标所在行 
* `#dd`: 删除包括当前光标所在行在内的`#`行* `末行`模式下:
	* `startADD`, `endADD` `d`			
			:1,8d
			
	* `.`: 表示当前行
	* `$`:表示最后一行
	* `+#`: 向下的#行	
删除的内容会被保存在缓冲区当中,删除的内容可以被撤消.最后一次的删除内容可以被粘贴在指定区中.

**粘贴命令**

* `p`: 如果删除或复制的为整行内容,则粘贴至光标所在行的`下方`. 如果删除或复制的内容为非整行,则粘贴至光标所在字符的`后面`.* `P`: 如果删除或复制的为整行内容,则粘贴至光标所在行的`上方`. 如果删除或复制的内容为非整行,则粘贴至光标所在字符的`前面`.
**复制命令**
`y`: 用法同`d`命令
**修改(先删除内容,再转换为输入模式)**
`c`: 用法同`d`命令
**替换**
* `r`:替换单个字符  * `R`:替换模式,`ESC`退出替换模式
**撤销编辑操作**
`u`(undo): 撤消前一次的编辑操作.
`连续`u命令可撤消此前的n次操作.
还原最近一次撤销: `Ctrl+r`
**重复前一次编辑操作**
`.`(点命令)
**可视化模式**
* `v`:按`字符`选取  * `V`:按`矩形`选取
**查找**
* `/pattern`:向尾部查找
* `?pattern`:向首部查找
	* `n`:下一个
	* `N`:上一个 

**查找并替换**

在末行模式下使用`s`命令

		ADDR1, ADDR2s@PATTERN@string@gi

`%`:表示全文

**如何使用vim编辑多个文件**

vim FILE1 FILE2 FILE3

* `:next` 切换至`下一个`文件* `:prev` 切换至`前一个`文件* `:last` 切换至`最后一个`文件* `:first` 切换至`第一个`文件

**分屏显示一个文件**

* `Ctrl+w`, `s`: `水平`拆分窗口* `Ctrl+w`, `v`: `垂直`拆分窗口
在窗口间切换光标:
`Ctrl+w`, `ARROW`(上向左右箭头)

`:qa`: 关闭所有窗口

**分窗口多个文件**

* `vim –o FILE1 FILE2..` : `水平`分隔显示
* `vim –O FILE1 FILE2..` : `垂直`分隔显示

**将当前文件中部分内容另存为另外一个文件**

末行模式下使用`w`命令  `:w`  `:ADDR1,ADDR2w /path/to/somewhere`

**将另外一个文件的内容附加在当前文件中**

`:r /path/to/somefile`

**跟shell交互,不用退出执行shell命令**

`:! COMMAND(shell命令)`

**高级话题**

* 显示或行号:
	* `:set number`	* `:set nu`
* 取消显示行号:
	* `:set nonu`	
* 设定忽略或区分字符大小写* 
	* :set ignorecase	* :set ic 	
	* :set noignorecase	* :set noic* 设定自动缩进	* :set autoindent	* :set ai	* :set noai

* 查找到的文本高亮显示或取消
	* :set hlsearch		* :set nohlsearch
* 语法着色
	* :syntax on (开启)	* :syntax off (关闭)**配置文件**
*  /etc/vimrc (`全局`)
*  ~/.vimrc (`个人`)

**Vim教程**

`vimtutor`

###整理知识点

---