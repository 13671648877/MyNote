# 07_03 Linux文件查找详解

### 笔记

---

**文件查找**

`locate`: 全系统查找文件的命令,非实时的,模糊匹配查找,`速度快`,查找是根据全系统文件数据库进行的. 

每天晚上取决于任务计划,自动将本系统所有文件的相关信息收集起来并保存至一个数据库中. `locate根据数据库进行文件查找`.

`updatedb`: 手动生成文件数据库命令

`find`:`实时`,`精确`,`遍历制定目录中的所有文件完成查找`,`速度慢`,支持众多查找标准

**find命令**

`find` `查找路径` `查找标准` `查找到以后的处理动作`

* 查找路径: 默认为`当前目录`
* 查找标准: 默认为`指定路径下的所有文件`
* 处理动作: 默认为`显示`

`查找标准`(匹配标准):
		
* `-name 'FILENAME'`: 对文件名做精确匹配的
* 文件名通配:
	* `*`: 任意长度的任意字符
	* `?`:
	* `[]`:
* `-iname 'FILENAME'`: 文件名匹配时`不区分大小写`
* `-regex PATTERN`: 基于正则表达式进行`文件名`匹配
* `-user USERNAME`: 根据文件的`属主`查找
* `-group GROUPNAME`: 根据`属组`查找
* `-uid UID` : 根据`UID`查找
* `-gid GID` : 根据`GID`查找
	
一个用户`被删除后`,此前属于这个用户的文件的属主会变成这个用户的id号,所以需要根据 UID,GID 去查找

		ls -l /tmp
		-rw-rw-r-- 1 hadoop hadoop 0 Mar ...
		
		删除用户后
		-rw-rw-r-- 1 2003   2003   0 Mar ...
		
* `-nouser`: 查找`没有属主`的用户
* `-nogroup`: 查找`没有属组`的文件
* `-type`: 根据`文件类型`查找
	* `f`: 普通文件
	* `d`: 目录
	* `c`: 字符设备
	* `b`: 块设备
	* `l`: 符号链接文件	* `p`: 管道设备	* `s`: 套接字设备* `-size` : 根据`文件大小`查找 `[+|-]数字`,`单位`, +:表示大于. -:表示小于	* [+|-]#k	* [+|-]#M	* [+|-]#G	* `误差`是在`一个单位`,比如找 10k, 查找到的为 9-10k.
	
**组合条件**

* `-a`: `与`,如果没给条件,默认是 与 条件.
* `-o`: `或`
* `-not`: `非`

**find 根据文件时间戳查找**

* `-mtime`: 修改时间
* `-ctime`: 改变时间
* `-atime`: 访问时间
* `-mmin`: 修改分钟* `-cmin`: 改变分钟* `-amin`: 访问分钟
`[+|-]#`
		find ./ -amin +5
**find 根据权限查找**

* `-perm MODE`: `精确`匹配

		find ./ -perm 644

* `/MODE`: `任意一位`匹配即满足条件

		find ./ -perm /644

* `-MODE`: 文件权限能`完全包含`此MODE是才符合条件

		-644： 644 可以， 755 可以(完全包含644),  750 不可以
		
		644: rw-r--r--
		755: rwxr-xr-x
		750: rwxr-x---
		
**find 的动作(查找以后的处理动作)**

* `-print`: 显示* `-ls`: 类似ls –l的形式显示每一个文件的详细* `-ok COMMAND {} \;`: 每一次操作都需要用户确认
		find ./ -type d -ok chmod+x {} \;
		< chmod ... ./> ? y
		...		* `-exec COMMAND {} \;`: 不需要用户确认
		find ./ -perm -006 -exec chmod o-w {} \;* `{}`: 引用文件名

### 整理知识点

---