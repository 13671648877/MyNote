#05_02 bash脚本编程之一 变量、变量类型等

###笔记

---

**fgrep**

`fast grep`: 不支持正则表达式

**shel编程**

`解释器`: 解释器是一条一条的解释执行源语言. 比如php,postscritp,javascript就是典型的解释性语言.

`编译器`: 编译器是把源代码整个`编译成目标代码`,执行时不在需要编译器,直接在支持目标代码的平台上运行,这样执行效率比解释执行快很多.比如C语言代码被编译成二进制代码(exe程序),在windows平台上执行.

![编译器与解释器区别](./img/05_02_1.jpg "编译器与解释器区别")

`编程语言`: 机器语言,汇编语言,高级语言

`高级语言`:

* `静态语言`: `编译型`语言,`强`类型(变量,变量在使用前,必须事先声明,甚至要初始化. 数字默认初始化为0, 字符默认初始化空null, 0不是空null),`事先转换成可执行格式`,C, C++, JAVA, C#
* `动态语言`: `解释型语言`,on the fly`弱`类型(变量,变量随用随声明,不需要区分类型)不需要转换,边解释边执行,ASP, PHP, `SHELL`, PYTHON, PERL
`面向过程`: Shell,C  
`面向对象`: JAVA,Python,perl,C++

`变量`: 内存空间,命名内存空间(变量名引用变量). 用完回收  
`变量类型`: 事先确定数据的存储格式和长度
`变量赋值`: VAR_NAME = VALUE

`内存`: `编址`的`存储单元`.

`字符`:

		10: 1(ASNCII)0(ASNCII),7位可以表示,但是最小存储空间是8位,所以需要 16位,16bit
`数字`: 
		
		10: 1010(2进制) 需要4位, 8bit		
		
**BASH变量类型**

`环境变量`,`本地变量(局部变量)`,`位置变量`,`特殊变量`

`引用变量`: ${VARNAME},花括号可以省略

* `双引号`: `弱`引用`做`变量替换

		echo "There are some ${ANIMAL}s."
		There are some pigs.
	
* `单引号`: `强`引用`不做`变量替换

		echo 'There are some ${ANIMAL}s.'
		There are some ${ANIMAL}s.

* `本地变量`: 

		VARNAME=VALUE : 作用域为整个bash进程.
		
	![](./img/05_02_2.png "")

* `局部变量`:

		Local VARNAME=VALUE : 作用域为只对当前代码段.

* `环境变量`:

		Export VARNAME=VALUE
		
		or 
		
		VARNAME=VALUE   
		Export VARNAME
		
		作用域为当前shell进程及其子进程

	![](./img/05_02_3.png "")
	
**脚本执行**

* 命令行中启动的脚本会继承当前shell环境变量
* 系统自动执行的脚本(非命令行启动)需要自我定义需要的环境变量

**位置变量**

`$1,$2,...`

用来引用脚本参数

**特殊变量**

`$?`: 上一个命令的执行状态返回值(0-255)

* `0`: 正确执行
* `1-255`: 错误执行, 1,2,127 系统预留 

**/dev/null**

软件设备（bit bucket）,数据黑洞

**撤销变量**

`unset` VARNAME

**查看当前shell变量**

`set`

**查看当前shell中的环境变量**

`printenv`,`env`,`export`

**追加变量**

![](./img/05_02_4.png "")

**脚本**

命令的堆砌,按实际需要,结合命令流程控制机制实现的源程序.

默认脚本文件存储是ASCII.内核不会执行ASCII，需要告诉内核用什么执行所以有`shebang`.
`ELF`: 内核只能认识上面的执行命令.
![](./img/05_02_5.png "")

`shebang`: 魔数

		#!/bin/bash 注释行,不执行
		
直接执行脚本因为当前命令执行的路径(PWD)不在环境变量,所以需要指定路径`./`或者把当前路径放在`环境变量`中去($PATH).

		$ ??.sh
		-bash: ??.sh: command not found
		
		./?.sh
		可执行
		
`bash` : 去掉脚本的执行权限,用`解释器`来执行

		bash ??.sh

###整理知识点

---