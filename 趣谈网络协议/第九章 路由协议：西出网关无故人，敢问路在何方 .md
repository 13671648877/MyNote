# 第9章 路由协议：西出网关无故人，敢问路在何方 

## 知识点

### 路由表

路由器是一台网络谁被, 有多张网卡. 当一个口的网络包送到路由器时，它会根据一个本地的转发信息库，来决定如何正确地转发流量。这个转发信息库通常被称为路由表。

一张路由表有多条路由规则.

一条规则至少包含这三项信息

* 目的网络: 这个包去哪?
* 出口设备: 将包从哪个口扔出去?
* 下一跳网关: 下一个路由器的地址

```
ip route add 10.176.48.0/20 via 10.173.32.1 dev eth0
```

要去`10.176.48.0/20`这个目标网络, 要从`eth0`这个端口出去, 经过`10.173.32.1`.

根据目的`IP`地址类配置路由.

### 配置策略路由

**策略路由**, 根据多个参数来配置路由.

配置多个路由表, 可以根据源`IP`地址, 入口设备, TOS等选择路由表, 然后在路由表中查找路由.

```
ip rule add from 192.168.1.0/24 table 10 
ip rule add from 192.168.2.0/24 table 20
```

* 从`192.168.1.0/24`这个网段来, 使用`table 10`路由表
* 从`192.168.2.0/24`这个网段来, 使用`table 20`路由表
