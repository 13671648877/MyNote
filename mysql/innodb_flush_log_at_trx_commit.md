# innodb_flush_log_at_trx_commit

---

## 简介

`InnoDB`引擎特有的. 用于事务日志(redo log)

## 值

* `0`: `log buffer`会每秒写入到日志文件并刷写(flush)到磁盘. 但每次事务提交不会有任何影响, 也就是`log buffer`的刷写操作和事务提交操作没有关系. 在这种情况下, MySQL性能最好, 但如果`mysqld`进程崩溃, 通常会导致最后`1s`的日志丢失.
* `1`: **每次事务提交**时, `log buffer`会被写入到日志文件并刷写到磁盘. 这也是默认值. 这是最安全的配置, 但由于每次事务都需要进行磁盘I/O, 所以也最慢.
* `2`: **每次事务提交**会写入日志文件, 但并不会立即刷写到磁盘, 日志文件会每秒刷写一次到磁盘. 这时如果`mysqld`进程崩溃, 由于日志已经写入到系统缓存, 所以并不会丢失数据; 在操作系统崩溃的情况下, 通常会导致最后`1s`的日志丢失.

### 0 和 2 的区别

* `0`: mysqld进程的崩溃会导致事务数据的丢失.
* `2`: mysqld进程的崩溃**不会**丢失任何事务, 如果整个服务器"挂了"或者断电了, 则还是可能会丢失一些事务.
