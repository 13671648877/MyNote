# 第六章 多核时代的编程

## 摩尔定律

### 高速缓存

高速缓存, 实际上是消耗一定数量的晶体管用作`CPU`内部高速存储空间, 从而提升速度的一种技术.

### CPU的分支预测

利用分支指令跳转目标上的偏向性, 实现对跳转的目标进行猜测, 并执行相应的**取出**指令操作.

### CPU的投机执行

对条件分支后的跳转目标进行预测后, 不仅仅是执行取出命令的操作, 还会进一步执行实际的运算操作. 

当条件分支的预测错误时, 需要取消刚才的执行, 但当预测正确时, 对性能的提升就可以比仅进行分支预测来的更加高效.

### 流水线 和 超标量

流水线是一种在垂直方向对指令处理进行重叠来提升性能的技术.

在水平方向上将指令进行重叠的技术成为超标量(superscalar). 在没有相互依赖关系的前提下, 多条指令可以同时执行.

### 乱序执行

```
a = b + c
d = a + e (依赖第1行)
g = d + h (依赖第2行)
j = k + l
m = n + o
```

如果将顺序改为:

```
a = b + c
j = k + l
d = a + e (依赖第1行)
m = n + o
g = d + h (依赖第3行)
```

可以填满空闲的执行单元. 稀释指令之间的相互依赖关系, 从而提高执行效率.

### 超线程

通过同时处理多个取出并执行指令的控制流程, 从而将没有相互依赖关系的运算同时送入运算器中, 通过这一手段, 可以提高超标量的利用率.

## UNIX管道

UNIX将文件定义为单纯的字节流. 对于这些字节流应当如何解释, 则交给每个应用程序来负责.

`UNIX`进程都具有标准输入和标准输出(还有标准错误输出)等默认的输入输出目标, 而`Shell`在启动命令时可以对这些输入输出目标进行连接和替换. 通过这样的方式, 就可以将某个命令的输出作为另一个命令的输入, 并将输出进一步作为另一个命令的输入, 也就是实现了命令的"串联".

## 非阻塞I/O

